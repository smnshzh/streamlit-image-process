import streamlit as st
from streamlit_folium import st_folium
import folium
import toml
import os

# Define the file path for saving data
data_file = 'user_data.toml'

# Check if the file exists; if not, create it with an initial structure
if not os.path.exists(data_file):
    initial_data = {
        "user": {
            "name": "",
            "phone_number": "",
            "latitude": None,
            "longitude": None
        }
    }
    with open(data_file, 'w') as f:
        toml.dump(initial_data, f)

# Title
st.title("Treasure Hunt App")

# Step 1: Collect user information
st.header("Step 1: Enter Your Information")
name = st.text_input("Name")
phone_number = st.text_input("Phone Number")



# Step 2: Display map for location recognition
st.header("Step 2: Identify the Location")
st.image("data:image/jpeg;base64,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")
st.write("Select image location on the map by clicking.")
# Create a map centered at an initial location
# Create a Folium map centered at the specified location
m = folium.Map(location=[35.6892, 51.3890], zoom_start=15)

# Add a click event for getting the latitude and longitude
click_marker = folium.LatLngPopup()
m.add_child(click_marker)

# Display the map in Streamlit
map_result = st_folium(m, width=700, height=500)

# Display the clicked coordinates
if map_result:
    # st.write("Clicked Coordinates:", map_result)
# Get latitude and longitude from user interaction

    lat, lon = map_result["last_clicked"]["lat"], map_result["last_clicked"]["lng"]

if lat is not None and lon is not None:
    st.write(f"Selected Location: Latitude {lat}, Longitude {lon}")

    # Step 3: Button to save location
    if st.button("Save Location"):
        # Save the user's location to the TOML file
        user_data = {
            "user": {
                "name": name,
                "phone_number": phone_number,
                "latitude": lat,
                "longitude": lon
            }
        }
        with open(data_file, 'w') as f:
            toml.dump(user_data, f)
        st.success("Location has been saved successfully!")
